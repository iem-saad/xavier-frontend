<style type="text/css">
  .card {
    backdrop-filter: blur(5px);
    min-width: 35vh;
    height: 130%;
    box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.051),
      0px 0px 7.2px rgba(0, 0, 0, 0.073), 0px 0px 13.6px rgba(0, 0, 0, 0.09),
      0px 0px 24.3px rgba(0, 0, 0, 0.107), 0px 0px 45.5px rgba(0, 0, 0, 0.129),
      0px 0px 109px rgba(0, 0, 0, 0.18);
  }

  .mt-custom {
    margin-top: 8rem; !important;
  }
</style>

<div class="container-fluid my-4" id="custom-click-id">
  <h4>Please Select which of the following features you want in analysis:</h4>
  <div class="row">
    <div class="form-check form-switch mx-3">
      <input class="form-check-input" type="checkbox" id="allMatricsSelection" onclick="check_all_options(this);">
      <label class="form-check-label fw-bold h6" for="allMatricsSelection">
        Select All Matrices
      </label>
    </div>
  </div>
  <%= form_for :analysis, url: selected_tabular_analysis_path(model_name: params[:model_name]), method: "GET" do |f| %>
  <div class="row my-4">
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :specificity, {class: "form-check-input custom-click"}, true, false  %>
                    <%= f.label :specificity, class: "form-check-label fw-bold h3" %>
                  </div>
                </h3>
              <p>This is a measure of how well a model is able to detect the negative class for example if the model is trying to detect a number, specificity is a measure of how well it can detect the absence of that number.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :class_accuracy, {class: "form-check-input custom-click"}, true, false  %>
                    <%= f.label :class_accuracy, class: "form-check-label fw-bold h3" %>
                  </div>
                </h3>
              <p>This Measure with tell about accuracy of each specific class from dataset separately.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :f1_score, {class: "form-check-input custom-click"}, true, false  %>
                    <%= f.label :f1_score, class: "form-check-label fw-bold h3" %>
                  </div>
                </h3>
              <p>The F1 score is a measure of a model's accuracy that takes into account both the precision and the recall of the model. It is obtained by harmonic mean between precision and recall</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-custom">
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :precision, {class: "form-check-input custom-click"}, true, false  %>
                    <%= f.label :precision, class: "form-check-label fw-bold h3" %>
                  </div>
                </h3>
              <p>This is a measure of how many of the samples that the model identified as positive are actually positive.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :auc, {class: "form-check-input custom-click"}, true, false  %>
                    <%= f.label :auc, class: "form-check-label fw-bold h3" %>
                  </div>
                </h3>
              <p>It is a measure of a model's ability to distinguish between the positive and negative classes. It is the area under the curve of the model's receiver operating characteristic (ROC) curve.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :recall, {class: "form-check-input custom-click"}, true, false  %>
                    <%= f.label :recall, class: "form-check-label fw-bold h3" %>
                  </div>
                </h3>
              <p>Recall is a measure of how well a model is able to detect the positive class for example if the model is trying to detect a number, sensitivity is a measure of how well it can detect the presence of the correct number. Recall & Sensitivity are same.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="row mt-custom">
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :accuracy, {class: "form-check-input custom-click"}, true, false  %>
                    <%= f.label :accuracy, class: "form-check-label fw-bold h3" %>
                  </div>
                </h3>
              <p>This is a measure of how often a model correctly predicts the correct class.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card card-1 card-hover" style="background-color: rgba(0, 166, 255, 0.3);">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-12">
                <h3 class="font-weight-bolder mb-0">
                  <div class="form-group form-check form-switch">
                    <%= f.check_box :f_beta, {class: "form-check-input custom-click", onclick: "show_field_after_clicking_metric(this)"}, true, false  %>
                    <%= f.label :f_beta, class: "form-check-label fw-bold h3" %>
                  </div>
                  <div class="row d-none" id="fbetaRangeDiv">
                    <div class="form-group col-6">
                       <label for="analysis[fbeta_range]">Range Selection for F Beta</label>
                       <br>
                      <%= f.range_field :fbeta_range, min: 0, max: 2, class: "form-control-range f-beta", step: 0.5 %>
                      <br>
                      <p>Value: <span id="slider_value"></span></p>
                    </div>
                  </div>
                </h3>
              <p>The F-beta score is a metric that combines precision and recall into a single score, where the precision and recall are weighted by the beta parameter.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
 
  <div class="row" style="margin-top: 7.5rem; !important;">
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4"></div>
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <button type="submit" class="btn btn-primary btn-lg btn-block">Submit Above Selected Features</button>
    </div>
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4"></div>
    </div>
  </div>
<% end %>
</div>

<script type="text/javascript">
  var slider = document.getElementById("analysis_fbeta_range");
  var output = document.getElementById("slider_value");
  output.innerHTML = slider.value;
  slider.oninput = function() {
    output.innerHTML = this.value;
  }

  function show_field_after_clicking_metric(event) {
    if (event.checked) {
      $('#fbetaRangeDiv').removeClass("d-none");
    }
    else {
      $('#fbetaRangeDiv').addClass("d-none");
    }
  }

  function check_all_options(event) {
    if (event.checked) {
      $('#custom-click-id .custom-click').attr('checked', true);
      $('#fbetaRangeDiv').removeClass("d-none");
    }
    else {
      $('#custom-click-id .custom-click').attr('checked', false);
      $('#fbetaRangeDiv').addClass("d-none");
    }
  }
</script>
